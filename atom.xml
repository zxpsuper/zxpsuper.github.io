<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://zxpsuper.github.io</id>
    <title>å°çš®å’–</title>
    <updated>2019-08-21T09:57:50.602Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://zxpsuper.github.io"/>
    <link rel="self" href="https://zxpsuper.github.io/atom.xml"/>
    <subtitle>æ¸©æ•…è€ŒçŸ¥æ–°</subtitle>
    <logo>https://zxpsuper.github.io/images/avatar.png</logo>
    <icon>https://zxpsuper.github.io/favicon.ico</icon>
    <rights>All rights reserved 2019, å°çš®å’–</rights>
    <entry>
        <title type="html"><![CDATA[æ‰‹åŠ¨å®ç° promise]]></title>
        <id>https://zxpsuper.github.io/post/shou-dong-shi-xian-promise</id>
        <link href="https://zxpsuper.github.io/post/shou-dong-shi-xian-promise">
        </link>
        <updated>2019-08-21T09:56:33.000Z</updated>
        <summary type="html"><![CDATA[<p><code>promise</code>  æä¾›äº†å¼‚æ­¥æ“ä½œçš„è§£å†³æ–¹æ¡ˆï¼Œæœ¬æ–‡å¸¦ä½ ä¸€æ­¥æ­¥å®ç°ä¸€ä¸ª <code>promise</code>.</p>
]]></summary>
        <content type="html"><![CDATA[<p><code>promise</code>  æä¾›äº†å¼‚æ­¥æ“ä½œçš„è§£å†³æ–¹æ¡ˆï¼Œæœ¬æ–‡å¸¦ä½ ä¸€æ­¥æ­¥å®ç°ä¸€ä¸ª <code>promise</code>.</p>
<!-- more -->
<h2 id="åŸºç¡€ç‰ˆæœ¬">åŸºç¡€ç‰ˆæœ¬</h2>
<ul>
<li>è®¾å®šä¸‰ä¸ªçŠ¶æ€ <code>pendingã€fulfilledã€rejected</code> ï¼Œåªèƒ½ç”± <code>pending</code> æ”¹å˜ä¸º <code>fulfilledã€rejected</code>ï¼Œå¹¶ä¸”åªèƒ½æ”¹å˜ä¸€æ¬¡</li>
<li>MyPromise æ¥æ”¶ä¸€ä¸ªå‡½æ•° <code>executor</code>ï¼Œ<code>executor</code> æœ‰ä¸¤ä¸ªå‚æ•° <code>resolve</code> æ–¹æ³•å’Œ <code>reject</code> æ–¹æ³•</li>
<li><code>resolve</code> å°† <code>PENDING</code> æ”¹å˜ä¸º <code>fulfilled</code></li>
<li><code>reject</code> å°† <code>PENDING</code> æ”¹å˜ä¸º <code>fulfilled</code></li>
<li><code>promise</code> å˜ä¸º <code>fulfilled</code> çŠ¶æ€åå…·æœ‰ä¸€ä¸ªå”¯ä¸€çš„ <code>value</code></li>
<li>promise å˜ä¸º <code>rejected</code> çŠ¶æ€åå…·æœ‰ä¸€ä¸ªå”¯ä¸€çš„ <code>reason</code></li>
</ul>
<pre><code class="language-js">function MyPromise(executor) {
    this.state = PENDING;
    this.value = null;
    this.reason = null;

    const resolve = value =&gt; {
        if (this.state === PENDING) {
            this.state = FULFILLED;
            this.value = value;
        }
    };

    const reject = reason =&gt; {
        if (this.state === PENDING) {
            this.state = REJECTED;
            this.reason = reason;
        }
    };

    try {
        executor(resolve, reject);
    } catch (reason) {
        reject(reason);
    }
}
</code></pre>
<h2 id="then-æ–¹æ³•">then æ–¹æ³•</h2>
<ul>
<li>then æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•° <code>onFulfilledã€onRejected</code>ï¼Œå®ƒä»¬åˆ†åˆ«åœ¨çŠ¶æ€ç”± <code>PENDING</code>æ”¹å˜ä¸º <code>FULFILLEDã€REJECTED</code> åè°ƒç”¨</li>
<li>ä¸€ä¸ª <code>promise</code> å¯ç»‘å®šå¤šä¸ª <code>then</code> æ–¹æ³•</li>
<li><code>then</code> æ–¹æ³•å¯ä»¥åŒæ­¥è°ƒç”¨ä¹Ÿå¯ä»¥å¼‚æ­¥è°ƒç”¨</li>
<li>åŒæ­¥è°ƒç”¨ï¼šçŠ¶æ€å·²ç»æ”¹å˜ï¼Œç›´æ¥è°ƒç”¨ <code>onFulfilled</code> æ–¹æ³•</li>
<li>å¼‚æ­¥è°ƒç”¨ï¼šçŠ¶æ€è¿˜æ˜¯ <code>PENDING</code>ï¼Œå°† <code>onFulfilledã€onRejected</code> åˆ†åˆ«åŠ å…¥ä¸¤ä¸ªå‡½æ•°æ•°ç»„ <code>onFulfilledCallbacksã€onRejectedCallbacks</code>ï¼Œå½“å¼‚æ­¥è°ƒç”¨ <code>resolve</code> å’Œ<code>reject</code> æ—¶ï¼Œå°†ä¸¤ä¸ªæ•°ç»„ä¸­ç»‘å®šçš„äº‹ä»¶å¾ªç¯æ‰§è¡Œã€‚</li>
</ul>
<pre><code class="language-js">// è™½ç„¶resolveæ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œæˆ‘ä»¬å¿…é¡»ä¿è¯thenæ˜¯å¼‚æ­¥è°ƒç”¨çš„ï¼Œæˆ‘ä»¬ç”¨settimeoutæ¥æ¨¡æ‹Ÿå¼‚æ­¥è°ƒç”¨ï¼ˆå¹¶ä¸èƒ½å®ç°å¾®ä»»åŠ¡å’Œå®ä»»åŠ¡çš„æ‰§è¡Œæœºåˆ¶ï¼Œåªæ˜¯ä¿è¯å¼‚æ­¥è°ƒç”¨ï¼‰
MyPromise.prototype.then = function(onFulfilled, onRejected) {
    if (typeof onFulfilled != 'function') {
        onFulfilled = function(value) {
            return value;
        };
    }
    if (typeof onRejected != 'function') {
        onRejected = function(reason) {
            throw reason;
        };
    }
    switch (this.state) {
        case FULFILLED:
            setTimeout(() =&gt; {
                onFulfilled(this.value);
            }, 0);
            break;
        case REJECTED:
            setTimeout(() =&gt; {
                onRejected(this.reason);
            }, 0);
            break;
        case PENDING:
            this.onFulfilledCallbacks.push(() =&gt; {
                setTimeout(() =&gt; {
                    onFulfilled(this.value);
                }, 0);
            });
            this.onRejectedCallbacks.push(() =&gt; {
                setTimeout(() =&gt; {
                    onRejected(this.reason);
                }, 0);
            });
            break;
    }
};
</code></pre>
<h2 id="then-æ–¹æ³•é“¾å¼è°ƒç”¨">then æ–¹æ³•é“¾å¼è°ƒç”¨</h2>
<p>ä¿è¯é“¾å¼è°ƒç”¨ï¼Œå³ <code>then</code> æ–¹æ³•ä¸­è¦è¿”å›ä¸€ä¸ªæ–°çš„ <code>promise</code>ï¼Œå¹¶å°† <code>then</code> æ–¹æ³•çš„è¿”å›å€¼è¿›è¡Œ <code>resolve</code>ã€‚</p>
<pre><code class="language-js">MyPromise.prototype.then = function(onFulfilled, onRejected) {
    if (typeof onFulfilled != 'function') {
        onFulfilled = function(value) {
            return value;
        };
    }
    if (typeof onRejected != 'function') {
        onRejected = function(reason) {
            throw reason;
        };
    }
    const promise2 = new MyPromise((resolve, reject) =&gt; {
        switch (this.state) {
            case FULFILLED:
                setTimeout(() =&gt; {
                    try {
                        const x = onFulfilled(this.value);
                        resolve(x);
                    } catch (reason) {
                        reject(reason);
                    }
                }, 0);
                break;
            case REJECTED:
                setTimeout(() =&gt; {
                    try {
                        const x = onRejected(this.reason);
                        resolve(x);
                    } catch (reason) {
                        reject(reason);
                    }
                }, 0);
                break;
            case PENDING:
                this.onFulfilledCallbacks.push(() =&gt; {
                    setTimeout(() =&gt; {
                        try {
                            const x = onFulfilled(this.value);
                            resolve(x);
                        } catch (reason) {
                            reject(reason);
                        }
                    }, 0);
                });
                this.onRejectedCallbacks.push(() =&gt; {
                    setTimeout(() =&gt; {
                        try {
                            const x = onRejected(this.reason);
                            resolve(x);
                        } catch (reason) {
                            reject(reason);
                        }
                    }, 0);
                });
                break;
        }
    });
    return promise2;
};
</code></pre>
<h2 id="catch-æ–¹æ³•">catch æ–¹æ³•</h2>
<p>è‹¥ä¸Šé¢æ²¡æœ‰å®šä¹‰ <code>reject</code> æ–¹æ³•ï¼Œæ‰€æœ‰çš„å¼‚å¸¸ä¼šèµ°å‘ <code>catch</code> æ–¹æ³•ï¼š</p>
<pre><code class="language-js">MyPromise.prototype.catch = function(onRejected) {
    return this.then(null, onRejected);
};
</code></pre>
<h2 id="finally-æ–¹æ³•">finally æ–¹æ³•</h2>
<p>ä¸ç®¡æ˜¯ <code>resolve</code> è¿˜æ˜¯ <code>reject</code> éƒ½ä¼šè°ƒç”¨ <code>finally</code>ã€‚</p>
<pre><code class="language-js">MyPromise.prototype.finally = function(fn) {
    return this.then(
        value =&gt; {
            fn();
            return value;
        },
        reason =&gt; {
            fn();
            throw reason;
        }
    );
};
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ç»§æ‰¿çš„å‡ ç§æ–¹å¼]]></title>
        <id>https://zxpsuper.github.io/post/ji-cheng-de-ji-chong-fang-shi</id>
        <link href="https://zxpsuper.github.io/post/ji-cheng-de-ji-chong-fang-shi">
        </link>
        <updated>2019-08-21T09:55:18.000Z</updated>
        <summary type="html"><![CDATA[<p><strong>ç»§æ‰¿ä¼˜å…ˆå¯»æ‰¾æœ¬èº«ï¼Œæ²¡æœ‰æ‰¾åˆ°çš„è¯å†ä»åŸå‹é“¾ (__proto__å±æ€§) ä¸€å±‚å±‚å¾€ä¸Šæ‰¾</strong></p>
]]></summary>
        <content type="html"><![CDATA[<p><strong>ç»§æ‰¿ä¼˜å…ˆå¯»æ‰¾æœ¬èº«ï¼Œæ²¡æœ‰æ‰¾åˆ°çš„è¯å†ä»åŸå‹é“¾ (__proto__å±æ€§) ä¸€å±‚å±‚å¾€ä¸Šæ‰¾</strong></p>
<!-- more -->
<h2 id="ç±»å¼ç»§æ‰¿">ç±»å¼ç»§æ‰¿</h2>
<pre><code class="language-js">// å£°æ˜çˆ¶ç±»
function SupperClass(value) {
  this.value = value;
  this.fn = function() {
    console.log(this.value);
  };
}
SupperClass.prototype.otherValue = &quot;other value&quot;;

// å­ç±»
function SubClass(value) {
  this.subValue = value;
}
SubClass.prototype = new SupperClass(&quot;I'm supper value&quot;);
//å£°æ˜å­ç±»ï¼Œå¹¶ä½¿å¾—å­ç±»ç»§æ‰¿è‡ªSupperClass
</code></pre>
<h3 id="ç¼ºç‚¹">ç¼ºç‚¹:</h3>
<ol>
<li>
<p>å­ç±»ç»§æ‰¿è‡ªçˆ¶ç±»çš„å®ä¾‹ï¼Œè€Œå®ä¾‹åŒ–çˆ¶ç±»çš„è¿‡ç¨‹åœ¨å£°æ˜é˜¶æ®µï¼Œå› æ­¤åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­æ— æ³•æ ¹æ®å®é™…æƒ…å†µå‘çˆ¶ç±»ç©¿å‚</p>
</li>
<li>
<p>å­ç±»çš„å®¶åº­å…³ç³»ä¸å®Œå–„ã€‚Instance.constructor = SupperClassï¼Œå› ä¸º SubClass å¹¶æ²¡æœ‰ constructor å±æ€§ï¼Œæ‰€ä»¥æœ€ç»ˆä¼šä» SupperClass.prototype å¤„ç»§æ‰¿å¾—åˆ°è¯¥å±æ€§ã€‚</p>
</li>
<li>
<p>ä¸èƒ½ä¸º SubClass.prototype è®¾ç½® constructor å±æ€§ï¼Œè¯¥å±æ€§ä¼šé€ æˆå±æ€§å±è”½ï¼Œå¯¼è‡´ SubClass.prototype ä¸èƒ½æ­£ç¡®è·å–è‡ªå·±çš„ constructor å±æ€§</p>
</li>
</ol>
<h2 id="æ„é€ å‡½æ•°ç»§æ‰¿">æ„é€ å‡½æ•°ç»§æ‰¿</h2>
<pre><code class="language-js">function SupperClass(value1) {
  this.xx = value1;
}
function SubClass(value1, value2) {
  SupperClass.call(this, value1);
  this.xx = value2;
}

//å®é™…ä½¿ç”¨
var Instance = new SubClass(&quot;value1&quot;, &quot;value2&quot;);
</code></pre>
<ul>
<li>
<p>ä¼˜ç‚¹: å¯ä»¥ä¼ å‚</p>
</li>
<li>
<p>ç¼ºç‚¹: æ„é€ å‡½æ•°ç»§æ‰¿æ–¹å¼çš„æœ¬è´¨å°±æ˜¯å°†çˆ¶ç±»çš„æ„é€ æ–¹æ³•åœ¨å­ç±»çš„ä¸Šä¸‹æ–‡ç¯å¢ƒè¿è¡Œä¸€æ¬¡ï¼Œä»è€Œè¾¾åˆ°å¤åˆ¶çˆ¶ç±»å±æ€§çš„ç›®çš„ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¹¶æ²¡æœ‰æ„é€ å‡ºä¸€æ¡å®Œæ•´çš„åŸå‹é“¾ã€‚</p>
</li>
</ul>
<h2 id="ç»„åˆå¼ç»§æ‰¿">ç»„åˆå¼ç»§æ‰¿</h2>
<pre><code class="language-js">function SupperClass(value) {
  this.value = value;
  this.fn = function() {
    console.log(this.value);
  };
}
SupperClass.prototype.otherValue = &quot;other value&quot;;
//å£°æ˜çˆ¶ç±»

function SubClass(value1, value2) {
  SupperClass.call(this, value1);
  this.subValue = value2;
}
SubClass.prototype = new SupperClass(&quot;I'm supper value&quot;);
//å£°æ˜å­ç±»ï¼Œå¹¶ä½¿å¾—å­ç±»ç»§æ‰¿è‡ªSupperClass
//ä»¥ä¸Šä¸ºå£°æ˜é˜¶æ®µ

//é€šè¿‡ä»¥ä¸‹æ–¹å¼ä½¿ç”¨
var Instance = new SubClass(&quot;I'm supper value&quot;, &quot;I'm sub value&quot;);
</code></pre>
<ul>
<li>
<p>ä¼˜ç‚¹: ç»„åˆå¼ç»§æ‰¿é›†åˆäº†ä»¥ä¸Šä¸¤ç§ç»§æ‰¿æ–¹å¼çš„ä¼˜ç‚¹ï¼Œä»è€Œå®ç°äº†â€œå®Œç¾â€ç»§æ‰¿æ‰€æœ‰å±æ€§å¹¶èƒ½åŠ¨æ€ä¼ å‚çš„åŠŸèƒ½</p>
</li>
<li>
<p>ç¼ºç‚¹: ä½†æ˜¯è¿™ç§æ–¹å¼ä»ç„¶ä¸èƒ½è¡¥é½å­ç±»çš„å®¶åº­æˆå‘˜å…³ç³»ï¼Œå› ä¸º SubClass.prototype ä»ç„¶æ˜¯çˆ¶ç±»çš„å®ä¾‹ã€‚</p>
</li>
</ul>
<h2 id="åŸå‹å¼ç»§æ‰¿">åŸå‹å¼ç»§æ‰¿</h2>
<p>åŸå‹å¼ç»§æ‰¿åˆè¢«æˆä¸ºçº¯æ´ç»§æ‰¿ï¼Œå®ƒçš„é‡ç‚¹åªå…³æ³¨å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„ç»§æ‰¿å…³ç³»ï¼Œæ·¡åŒ–äº†ç±»ä¸æ„é€ å‡½æ•°çš„æ¦‚å¿µï¼Œè¿™æ ·èƒ½é¿å…å¼€å‘è€…èŠ±è´¹è¿‡å¤šçš„ç²¾åŠ›å»ç»´æŠ¤ç±»ä¸ç±»/ç±»ä¸åŸå‹ä¹‹é—´çš„å…³ç³»ï¼Œä»è€Œå°†é‡å¿ƒè½¬ç§»åˆ°å¼€å‘ä¸šåŠ¡é€»è¾‘ä¸Šé¢æ¥ã€‚</p>
<pre><code class="language-js">var supperObj = {
    key1: 'value',
    func: function(){
        console.log(this.key1);
    }
}

function Factory(obj){
    function F(){}
    F.prototype = obj;
    return new F()
}

//å®é™…ä½¿ç”¨æ–¹æ³•
//var Instance = new Factory(supperObj);
var Instance = Factory(supperObj);

</code></pre>
<ul>
<li>ç¼ºç‚¹ï¼š</li>
</ul>
<ol>
<li>æ— æ³•æ ¹æ®ä½¿ç”¨çš„å®é™…æƒ…å†µåŠ¨æ€ç”ŸæˆsupperObjï¼ˆæ— æ³•åŠ¨æ€ä¼ å‚ï¼‰ã€‚</li>
<li>è™½ç„¶å®ç°äº†å¯¹è±¡çš„ç»§æ‰¿ï¼Œä½†æ˜¯ç”Ÿæˆçš„å­ç±»è¿˜æ²¡æœ‰æ·»åŠ è‡ªå·±çš„å±æ€§ä¸æ–¹æ³•ã€‚</li>
</ol>
<ul>
<li>ä¼˜ç‚¹:</li>
</ul>
<ol>
<li>ç”±äºå…¶çº¯æ´æ€§ï¼Œå¼€å‘è€…ä¸å¿…å†å»ç»´æŠ¤constructorä¸prototypeå±æ€§ï¼Œä»…ä»…åªéœ€è¦å…³æ³¨åŸå‹é“¾ã€‚</li>
<li>æ›´å°‘çš„å†…å­˜å¼€é”€ã€‚</li>
</ol>
<h2 id="å¯„ç”Ÿå¼ç»§æ‰¿">å¯„ç”Ÿå¼ç»§æ‰¿</h2>
<p>ES5æä¾›äº†Object.create()ï¼Œå¹¶ä¸”åœ¨åŸå‹å¼ç»§æ‰¿ï¼Œä»¥åŠå¤šç»§æ‰¿ä¸­èµ·ç€é‡è¦çš„ä½œç”¨ã€‚åœ¨å¯„ç”Ÿå¼ç»§æ‰¿ä¸­æˆ‘ä»¬ä¼šå¯¹åŸå‹ç»§æ‰¿åšä¸€æ¬¡ä¼˜åŒ–ã€‚</p>
<p><code>var subObj = Object.create(obj);</code> = <code>subObj.prototype = obj</code></p>
<pre><code class="language-js">var supperObj = {
    key1: 'value',
    func: function(){
        console.log(this.key1);
    }
}
function inheritPrototype(obj,value){
    //var subObj = Factory(obj);
    var subObj = Object.create(obj);
    subObj.name = value;
    subObj.say = function(){
        console.log(this.name);
    }
    return subObj;
}

var Instance = inheritPrototype(supperObj,'sub');
Instance.func();
Instance.say();

</code></pre>
<p>å¯„ç”Ÿå¼ç»§æ‰¿å®é™…ä¸Šå°±æ˜¯å¯¹åŸå‹å¼ç»§æ‰¿çš„äºŒæ¬¡å°è£…ï¼Œåœ¨è¿™æ¬¡å°è£…è¿‡ç¨‹ä¸­å®ç°äº†æ ¹æ®æä¾›çš„å‚æ•°æ·»åŠ å­ç±»çš„è‡ªå®šä¹‰å±æ€§ã€‚ä½†æ˜¯ç¼ºç‚¹ä»ç„¶å­˜åœ¨ï¼Œ<strong>è¢«ç»§æ‰¿å¯¹è±¡æ— æ³•åŠ¨æ€ç”Ÿæˆ</strong>ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[This çš„å‡ ç§ä½¿ç”¨åœºæ™¯]]></title>
        <id>https://zxpsuper.github.io/post/this-de-ji-chong-shi-yong-chang-jing</id>
        <link href="https://zxpsuper.github.io/post/this-de-ji-chong-shi-yong-chang-jing">
        </link>
        <updated>2019-08-21T09:54:35.000Z</updated>
        <summary type="html"><![CDATA[<p><code>JavaScript</code> ä¸­çš„ <code>this</code> å«ä¹‰è¦ä¸°å¯Œå¾—å¤šï¼Œå®ƒå¯ä»¥æ˜¯å…¨å±€å¯¹è±¡ã€å½“å‰å¯¹è±¡æˆ–è€…ä»»æ„å¯¹è±¡ï¼Œè¿™å®Œå…¨å–å†³äºå‡½æ•°çš„è°ƒç”¨æ–¹å¼ã€‚<code>JavaScript</code> ä¸­å‡½æ•°çš„è°ƒç”¨æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š</p>
]]></summary>
        <content type="html"><![CDATA[<p><code>JavaScript</code> ä¸­çš„ <code>this</code> å«ä¹‰è¦ä¸°å¯Œå¾—å¤šï¼Œå®ƒå¯ä»¥æ˜¯å…¨å±€å¯¹è±¡ã€å½“å‰å¯¹è±¡æˆ–è€…ä»»æ„å¯¹è±¡ï¼Œè¿™å®Œå…¨å–å†³äºå‡½æ•°çš„è°ƒç”¨æ–¹å¼ã€‚<code>JavaScript</code> ä¸­å‡½æ•°çš„è°ƒç”¨æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š</p>
<!-- more -->
<h2 id="1-ä½œä¸ºå¯¹è±¡æ–¹æ³•è°ƒç”¨">1. ä½œä¸ºå¯¹è±¡æ–¹æ³•è°ƒç”¨</h2>
<p>åœ¨ <code>JavaScript</code> ä¸­ï¼Œå‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå› æ­¤å‡½æ•°å¯ä»¥ä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œæ­¤æ—¶è¯¥å‡½æ•°è¢«ç§°ä¸ºè¯¥å¯¹è±¡çš„æ–¹æ³•ï¼Œåœ¨ä½¿ç”¨è¿™ç§è°ƒç”¨æ–¹å¼æ—¶ï¼Œ<code>this</code> è¢«è‡ªç„¶ç»‘å®šåˆ°è¯¥å¯¹è±¡</p>
<pre><code class="language-js">var test = {
    a:0,
    b:0
    get:function(){
        return this.a;
    }
}
</code></pre>
<h2 id="2-ä½œä¸ºå‡½æ•°è°ƒç”¨å…¨å±€è°ƒç”¨">2. ä½œä¸ºå‡½æ•°è°ƒç”¨(å…¨å±€è°ƒç”¨)</h2>
<p>å‡½æ•°ä¹Ÿå¯ä»¥ç›´æ¥è¢«è°ƒç”¨ï¼Œæ­¤æ—¶ <code>this</code> ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ã€‚åœ¨æµè§ˆå™¨ä¸­ï¼Œ<code>window</code> å°±æ˜¯è¯¥å…¨å±€å¯¹è±¡ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼šå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œ<code>this</code> è¢«ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ï¼Œæ¥ä¸‹æ¥æ‰§è¡Œèµ‹å€¼è¯­å¥ï¼Œç›¸å½“äºéšå¼çš„å£°æ˜äº†ä¸€ä¸ªå…¨å±€å˜é‡ã€‚</p>
<pre><code class="language-js">var x = 10;
function foo() {
    console.log(this); //Window
    console.log(this.x); //10
}
foo();
</code></pre>
<h2 id="3-ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨">3. ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨</h2>
<p><code>javaScript</code> æ”¯æŒé¢å‘å¯¹è±¡å¼ç¼–ç¨‹ï¼Œä¸ä¸»æµçš„é¢å‘å¯¹è±¡å¼ç¼–ç¨‹è¯­è¨€ä¸åŒï¼Œ<code>JavaScript</code> å¹¶æ²¡æœ‰ç±»ï¼ˆ<code>class</code>ï¼‰çš„æ¦‚å¿µï¼Œè€Œæ˜¯ä½¿ç”¨åŸºäºåŸå‹ï¼ˆ<code>prototype</code>ï¼‰çš„ç»§æ‰¿æ–¹å¼ã€‚ç›¸åº”çš„ï¼Œ<code>JavaScript</code> ä¸­çš„æ„é€ å‡½æ•°ä¹Ÿå¾ˆç‰¹æ®Šï¼Œå¦‚æœä¸ä½¿ç”¨ <code>new</code> è°ƒç”¨ï¼Œåˆ™å’Œæ™®é€šå‡½æ•°ä¸€æ ·ã€‚ä½œä¸ºåˆä¸€é¡¹çº¦å®šä¿—æˆçš„å‡†åˆ™ï¼Œæ„é€ å‡½æ•°ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œæé†’è°ƒç”¨è€…ä½¿ç”¨æ­£ç¡®çš„æ–¹å¼è°ƒç”¨ã€‚å¦‚æœè°ƒç”¨æ­£ç¡®ï¼Œ<code>this</code> ç»‘å®šåˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ä¸Šã€‚</p>
<pre><code class="language-js">function Foo() {
    this.x = 10;
    console.log(this); //Foo {x:10}
}
var foo = new Foo();
console.log(foo.x); //10
</code></pre>
<h2 id="4-åœ¨-call-æˆ–è€…-applybind-ä¸­è°ƒç”¨">4. åœ¨ <code>call</code> æˆ–è€… <code>apply</code>ï¼Œ<code>bind</code> ä¸­è°ƒç”¨</h2>
<p>å½“ä¸€ä¸ªå‡½æ•°è¢« callã€apply æˆ–è€… bind è°ƒç”¨æ—¶ï¼Œthis çš„å€¼å°±å–ä¼ å…¥çš„å¯¹è±¡çš„å€¼ã€‚</p>
<pre><code class="language-js">var obj = {
    x: 10,
};
function foo() {
    console.log(this); //{x: 10}
    console.log(this.x); //10
}
foo.call(obj);
foo.apply(obj);
foo.bind(obj)();
</code></pre>
<h2 id="5-dom-event-this">5. <code>DOM event this</code></h2>
<p>åœ¨ä¸€ä¸ª <code>HTML DOM</code> äº‹ä»¶å¤„ç†ç¨‹åºé‡Œï¼Œ<code>this</code> å§‹ç»ˆæŒ‡å‘è¿™ä¸ªå¤„ç†ç¨‹åºæ‰€ç»‘å®šçš„ <code>HTML DOM</code> èŠ‚ç‚¹</p>
<pre><code class="language-js">function Listener() {
    document.getElementById('foo').addEventListener('click', this.handleClick); //è¿™é‡Œçš„ this æŒ‡å‘ Listener è¿™ä¸ªå¯¹è±¡ã€‚ä¸æ˜¯å¼ºè°ƒçš„æ˜¯è¿™é‡Œçš„ this
}
Listener.prototype.handleClick = function(event) {
    console.log(this); //&lt;div id=&quot;foo&quot;&gt;&lt;/div&gt;
};
var listener = new Listener();
document.getElementById('foo').click();
</code></pre>
<h2 id="6-ç®­å¤´å‡½æ•°ä¸­çš„-this">6. ç®­å¤´å‡½æ•°ä¸­çš„ <code>this</code></h2>
<p>ç®­å¤´å‡½æ•°å†…éƒ¨çš„ <code>this</code> æ˜¯è¯æ³•ä½œç”¨åŸŸï¼Œç”±ä¸Šä¸‹æ–‡ç¡®å®šã€‚</p>
<pre><code class="language-js">var obj = {
    x: 10,
    foo: function() {
        var fn = () =&gt; {
            return () =&gt; {
                return () =&gt; {
                    console.log(this); //Object {x: 10}
                    console.log(this.x); //10
                };
            };
        };
        fn()()();
    },
};
obj.foo();
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ•°ç»„çš„å»é‡ä¸æ‰å¹³åŒ–]]></title>
        <id>https://zxpsuper.github.io/post/shu-zu-de-qu-chong-yu-bian-ping-hua</id>
        <link href="https://zxpsuper.github.io/post/shu-zu-de-qu-chong-yu-bian-ping-hua">
        </link>
        <updated>2019-08-21T09:52:56.000Z</updated>
        <summary type="html"><![CDATA[<p>é¡¾åæ€ä¹‰,å°±æ˜¯å»æ‰æ•°ç»„ä¸­é‡å¤çš„å…ƒç´ ï¼Œé’ˆå¯¹åŸºæœ¬ç±»å‹æ•°æ®çš„æ•°ç»„, æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š</p>
]]></summary>
        <content type="html"><![CDATA[<p>é¡¾åæ€ä¹‰,å°±æ˜¯å»æ‰æ•°ç»„ä¸­é‡å¤çš„å…ƒç´ ï¼Œé’ˆå¯¹åŸºæœ¬ç±»å‹æ•°æ®çš„æ•°ç»„, æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š</p>
<!-- more -->
<h3 id="1-set">1. <code>Set</code></h3>
<p><code>ES6</code> æä¾›äº†æ–°çš„æ•°æ®ç»“æ„ <code>Set</code>ã€‚å®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ã€‚</p>
<p>å› æ­¤å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹å®ç°æ•°ç»„å»é‡ã€‚</p>
<pre><code class="language-js">let arr = [1, 1, 2, 2, 3, 3];

arr2 = [...new Set(arr)];

console.log(arr2); // [1,2,3]
</code></pre>
<h3 id="2-objectkeys">2. <code>Object.keys()</code></h3>
<p>æˆ‘ä»¬çŸ¥é“ï¼šå¯¹è±¡ <code>Object</code> çš„ <code>key</code> åéƒ½æ˜¯å”¯ä¸€çš„ï¼Œä¸€ä¸ªå¯¹è±¡ä¸å¯èƒ½å­˜åœ¨ä¸¤ä¸ªä¸€æ¨¡ä¸€æ ·çš„ <code>key</code>, åˆ©ç”¨è¿™ä¸€ç‰¹æ€§å®ç°æ•°ç»„å»é‡ï¼š</p>
<pre><code class="language-js">let arr = [1, 1, 2, 2, 3, 3, null];
arr2 = {};
for (let i in arr) {
    arr2[arr[i]] = true;
}
let arr3 = Object.keys(arr2);
console.log(arr3); // [&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;null&quot;]
</code></pre>
<p>è¿™ç§æ–¹æ³•å­˜åœ¨çš„é—®é¢˜æ˜¯ï¼Œæ‹¿åˆ°å»é‡çš„ç»“æœæ•°ç»„å…ƒç´ éƒ½å˜æˆäº†å­—ç¬¦ä¸²,å› æ­¤åªé€‚ç”¨å•ä¸€ç±»å‹çš„æ•°ç»„ã€‚</p>
<h3 id="3-arrayindexof">3. <code>Array.indexOf()</code></h3>
<p>åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œéå†åŸæ•°ç»„ï¼Œæ¯æ¬¡éå†æŸ¥è¯¢æ–°æ•°ç»„æ˜¯å¦å·²ç»å­˜åœ¨è¯¥å…ƒç´ ï¼Œè‹¥ä¸å­˜åœ¨ï¼Œåˆ™ <code>push</code> æ–°å…ƒç´ è¿›æ–°æ•°ç»„</p>
<pre><code class="language-js">var arr = ['a', 'c', 'b', 'd', 'a', 'b'];

var arr2 = [];

for (var i = 0; i &lt; arr.length; i++) {
    if (arr2.indexOf(arr[i]) &lt; 0) {
        arr2.push(arr[i]);
    }
}

console.log(arr2); // ['a', 'c', 'b', 'd']
</code></pre>
<h2 id="æ•°ç»„æ‰å¹³åŒ–">æ•°ç»„æ‰å¹³åŒ–</h2>
<p>æ•°ç»„æ‰å¹³åŒ–æ˜¯æŒ‡å°†ä¸€ä¸ªå¤šç»´æ•°ç»„å˜ä¸ºä¸€ç»´æ•°ç»„ï¼Œå¦‚</p>
<pre><code>[1, [2, 3, [4, 5]]]  ------&gt;    [1, 2, 3, 4, 5]
</code></pre>
<p>æ–¹æ³•æ˜¯å°†å­å…ƒç´ æ•°ç»„ä¸æ–­çš„å±•å¼€ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<h3 id="1-arrayreduce">1. <code>Array.reduce()</code></h3>
<p>éå†æ•°ç»„æ¯ä¸€é¡¹ï¼Œè‹¥å€¼ä¸ºæ•°ç»„åˆ™é€’å½’éå†ï¼Œå¦åˆ™ <code>concat</code>ã€‚</p>
<pre><code class="language-js">function flatten(arr) {
    return arr.reduce((result, item) =&gt; {
        return result.concat(Array.isArray(item) ? flatten(item) : item);
    }, []);
}
</code></pre>
<h3 id="2-objecttostring-stringsplit">2. <code>Object.toString()</code> &amp; <code>String.split()</code></h3>
<pre><code class="language-js">// æˆ‘ä»¬çŸ¥é“ï¼š
[1, 2, 3].toString(); // 1,2,3
// å› æ­¤
[1, [2, 3, [4, 5]]].toString(); // &quot;1,2,3,4,5&quot;
</code></pre>
<p>å†å°†æ‰€å¾—çš„å­—ç¬¦ä¸²åˆ‡å‰²æˆæ•°ç»„ï¼Œ</p>
<pre><code class="language-js">'1,2,3,4,5'.split(','); // [&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;]
</code></pre>
<p>ç»¼åˆï¼Œå†™æˆä¸€ä¸ªå‡½æ•°ï¼š</p>
<pre><code class="language-js">function flatten(arr) {
    return arr
        .toString()
        .split(',')
        .map(function(item) {
            return Number(item);
        });
}
</code></pre>
<h3 id="3-arrayjoin-stringsplit">3. <code>Array.join()</code> &amp; <code>String.split()</code></h3>
<p>å’Œä¸Šé¢çš„ <code>toString</code> ä¸€æ ·ï¼Œ<code>join</code> ä¹Ÿå¯ä»¥å°†æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²</p>
<pre><code class="language-js">function flatten(arr) {
    return arr
        .join(',')
        .split(',')
        .map(function(item) {
            return parseInt(item);
        });
}
</code></pre>
<h3 id="4-é€’å½’">4. é€’å½’</h3>
<p>é€’å½’çš„éå†æ¯ä¸€é¡¹ï¼Œè‹¥ä¸ºæ•°ç»„åˆ™ç»§ç»­éå†ï¼Œå¦åˆ™ <code>concat</code></p>
<pre><code class="language-js">function flatten(arr) {
    var res = [];
    arr.map(item =&gt; {
        if (Array.isArray(item)) {
            res = res.concat(flatten(item));
        } else {
            res.push(item);
        }
    });
    return res;
}
</code></pre>
<h3 id="5-æ‰©å±•è¿ç®—ç¬¦">5. æ‰©å±•è¿ç®—ç¬¦</h3>
<p><code>es6</code> çš„æ‰©å±•è¿ç®—ç¬¦èƒ½å°†äºŒç»´æ•°ç»„å˜ä¸ºä¸€ç»´.</p>
<pre><code class="language-js">[].concat(...[1, 2, 3, [4, 5]]); // [1, 2, 3, 4, 5]
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªéå†ï¼Œè‹¥ <code>arr</code> ä¸­å«æœ‰æ•°ç»„åˆ™ä½¿ç”¨ä¸€æ¬¡æ‰©å±•è¿ç®—ç¬¦ï¼Œç›´è‡³æ²¡æœ‰ä¸ºæ­¢ã€‚</p>
<pre><code class="language-js">function flatten(arr) {
    while (arr.some(item =&gt; Array.isArray(item))) {
        arr = [].concat(...arr);
    }
    return arr;
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ‰‹åŠ¨å®ç°ä¸€ä¸ª EvenEmitter]]></title>
        <id>https://zxpsuper.github.io/post/shou-dong-shi-xian-yi-ge-evenemitter</id>
        <link href="https://zxpsuper.github.io/post/shou-dong-shi-xian-yi-ge-evenemitter">
        </link>
        <updated>2019-08-21T09:52:02.000Z</updated>
        <summary type="html"><![CDATA[<p>åŸç†:</p>
<p><code>EvenEmitter</code> çš„åŸç†ä¾¿æ˜¯å‘å¸ƒè®¢é˜…è€…æ¨¡å¼ã€‚</p>
<ul>
<li>
<p>ç”¨æˆ·è®¢é˜…ä¸€ä¸ªäº‹ä»¶å¹¶å°†æ‰§è¡Œå‡½æ•°äº¤ç»™ <code>EvenEmiter</code>, <code>EvenEmitter</code>æ³¨å†Œæ­¤äº‹ä»¶ç±»å‹ï¼Œå¹¶å°†æ‰§è¡Œå‡½æ•°å­˜å…¥è¯¥ç±»å‹äº‹ä»¶çš„æ•°ç»„ä¸­ã€‚</p>
</li>
<li>
<p>ä¸€æ—¦ç”¨æˆ·å‘å¸ƒäº‹ä»¶åŠå‚æ•°ï¼Œ<code>EvenEmitter</code>ä¾¿ä¼šæ‰¾åˆ°è¯¥ç±»å‹äº‹ä»¶çš„æ•°ç»„ï¼Œå¹¶é€ä¸€æ‰§è¡Œæ•°ç»„å†…çš„å‡½æ•°</p>
</li>
</ul>
]]></summary>
        <content type="html"><![CDATA[<p>åŸç†:</p>
<p><code>EvenEmitter</code> çš„åŸç†ä¾¿æ˜¯å‘å¸ƒè®¢é˜…è€…æ¨¡å¼ã€‚</p>
<ul>
<li>
<p>ç”¨æˆ·è®¢é˜…ä¸€ä¸ªäº‹ä»¶å¹¶å°†æ‰§è¡Œå‡½æ•°äº¤ç»™ <code>EvenEmiter</code>, <code>EvenEmitter</code>æ³¨å†Œæ­¤äº‹ä»¶ç±»å‹ï¼Œå¹¶å°†æ‰§è¡Œå‡½æ•°å­˜å…¥è¯¥ç±»å‹äº‹ä»¶çš„æ•°ç»„ä¸­ã€‚</p>
</li>
<li>
<p>ä¸€æ—¦ç”¨æˆ·å‘å¸ƒäº‹ä»¶åŠå‚æ•°ï¼Œ<code>EvenEmitter</code>ä¾¿ä¼šæ‰¾åˆ°è¯¥ç±»å‹äº‹ä»¶çš„æ•°ç»„ï¼Œå¹¶é€ä¸€æ‰§è¡Œæ•°ç»„å†…çš„å‡½æ•°</p>
</li>
</ul>
<!-- more -->
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªç®€å•ç‰ˆå’Œä¸€ä¸ªé«˜çº§ç‰ˆã€‚</p>
<h2 id="ç®€å•ç‰ˆæœ¬">ç®€å•ç‰ˆæœ¬</h2>
<pre><code class="language-js">// å‘å¸ƒè®¢é˜…è€…æ¨¡å¼
var EvenEmitter = function() {
    this.obj = {};
};

EvenEmitter.prototype.on = function(eventType, fn) {
    if (!this.obj[eventType]) {
        this.obj[eventType] = [];
    }
    this.obj[eventType].push(fn);
};

EvenEmitter.prototype.emit = function(...arguments) {
    // argumentsæ˜¯ç±»æ•°ç»„å¯¹è±¡ï¼Œä¸å¯ç›´æ¥ä½¿ç”¨æ•°ç»„æ–¹æ³•ï¼Œä¸‹é¢ä½¿argumentsä½¿ç”¨shiftæ–¹æ³•
    var eventType = Array.prototype.shift.call(arguments);

    var arr = this.obj[eventType];
    for (let i = 0; i &lt; arr.length; i++) {
        // argumentsä¸Šä¸€æ­¥éª¤å·²ç»å»é™¤äº†ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå‰©ä¸‹åé¢çš„å…ƒç´ ,è°ƒç”¨æ‰€å¯¹åº”çš„æ–¹æ³•
        arr[i].apply(arr[i], arguments);
    }
};

var ev = new EvenEmitter();

ev.on('click', function(a) {
    // è®¢é˜…å‡½æ•°
    console.log(a); // 1
});

ev.emit('click', 888); // å‘å¸ƒå‡½æ•°
</code></pre>
<h2 id="é«˜çº§ç‰ˆæœ¬">é«˜çº§ç‰ˆæœ¬</h2>
<pre><code class="language-js">// é«˜çº§ç‰ˆæœ¬ï¼Œå®ç°remove onceç­‰åŠŸèƒ½
function EventEmitter() {
    this._events = Object.create(null);
}

// å‘äº‹ä»¶é˜Ÿåˆ—æ·»åŠ äº‹ä»¶
// prependä¸ºtrueè¡¨ç¤ºå‘äº‹ä»¶é˜Ÿåˆ—å¤´éƒ¨æ·»åŠ äº‹ä»¶
EventEmitter.prototype.addListener = function(type, listener, prepend) {
    if (!this._events) {
        this._events = Object.create(null);
    }
    if (this._events[type]) {
        if (prepend) {
            this._events[type].unshift(listener);
        } else {
            this._events[type].push(listener);
        }
    } else {
        this._events[type] = [listener];
    }
};

// ç§»é™¤æŸä¸ªäº‹ä»¶
EventEmitter.prototype.removeListener = function(type, listener) {
    if (Array.isArray(this._events[type])) {
        if (!listener) {
            delete this._events[type];
        } else {
            this._events[type] = this._events[type].filter(
                e =&gt; e !== listener &amp;&amp; e.origin !== listener
            );
        }
    }
};

// å‘äº‹ä»¶é˜Ÿåˆ—æ·»åŠ äº‹ä»¶ï¼Œåªæ‰§è¡Œä¸€æ¬¡
EventEmitter.prototype.once = function(type, listener) {
    const only = (...args) =&gt; {
        // è¿™é‡Œçš„argsæ˜¯ emit æ—¶ç”¨applyä¼ å…¥çš„
        listener.apply(this, args);
        this.removeListener(type, listener);
    };
    only.origin = listener;
    this.addListener(type, only);
};

// æ‰§è¡ŒæŸç±»äº‹ä»¶
EventEmitter.prototype.emit = function(type, ...args) {
    if (Array.isArray(this._events[type])) {
        this._events[type].forEach(fn =&gt; {
            fn.apply(this, args);
        });
    }
};

var emitter = new EventEmitter();

var onceListener = function(args) {
    console.log('æˆ‘åªèƒ½è¢«æ‰§è¡Œä¸€æ¬¡', args, this);
};

var listener = function(args) {
    console.log('æˆ‘æ˜¯ä¸€ä¸ªlistener', args, this);
};

emitter.once('click', onceListener);
emitter.addListener('click', listener);

emitter.emit('click', 'å‚æ•°');
emitter.emit('click');

emitter.removeListener('click', listener);
emitter.emit('click');
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ‰‹åŠ¨å®ç° callã€applyã€bind]]></title>
        <id>https://zxpsuper.github.io/post/shou-dong-shi-xian-callapplybind</id>
        <link href="https://zxpsuper.github.io/post/shou-dong-shi-xian-callapplybind">
        </link>
        <updated>2019-08-21T09:47:34.000Z</updated>
        <summary type="html"><![CDATA[<p>æ”¹å˜ <code>this</code> çš„æŒ‡å‘ï¼Œå°±æ˜¯å°†å‡½æ•°<code>fn</code>æ”¾å…¥ä¼ å…¥çš„<code>context</code>ä¸­ï¼Œç„¶åæ‰§è¡Œ<code>context[fn]()</code>,æ­¤æ—¶çš„<code>fn</code>ä¸­çš„<code>this</code>å°±å˜æˆäº†<code>context</code>ï¼Œåœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œéœ€åˆ é™¤<code>context</code>ä¸­çš„<code>fn</code></p>
]]></summary>
        <content type="html"><![CDATA[<p>æ”¹å˜ <code>this</code> çš„æŒ‡å‘ï¼Œå°±æ˜¯å°†å‡½æ•°<code>fn</code>æ”¾å…¥ä¼ å…¥çš„<code>context</code>ä¸­ï¼Œç„¶åæ‰§è¡Œ<code>context[fn]()</code>,æ­¤æ—¶çš„<code>fn</code>ä¸­çš„<code>this</code>å°±å˜æˆäº†<code>context</code>ï¼Œåœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œéœ€åˆ é™¤<code>context</code>ä¸­çš„<code>fn</code></p>
<!-- more -->
<h2 id="call">call</h2>
<ol>
<li>åˆ¤æ–­å½“å‰ <code>this</code> æ˜¯å¦ä¸ºå‡½æ•°ï¼Œé˜²æ­¢ <code>Function.prototype.myCall()</code> ç›´æ¥è°ƒç”¨</li>
<li><code>context</code> ä¸ºå¯é€‰å‚æ•°ï¼Œå¦‚æœä¸ä¼ çš„è¯é»˜è®¤ä¸Šä¸‹æ–‡ä¸º <code>window</code></li>
<li>ä¸º <code>context</code> åˆ›å»ºä¸€ä¸ª <code>Symbol</code>ï¼ˆä¿è¯ä¸ä¼šé‡åï¼‰å±æ€§ï¼Œå°†å½“å‰å‡½æ•°èµ‹å€¼ç»™è¿™ä¸ªå±æ€§</li>
<li>å¤„ç†å‚æ•°ï¼Œä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°åçš„å…¶ä½™å‚æ•°</li>
<li>è°ƒç”¨å‡½æ•°åå³åˆ é™¤è¯¥ <code>Symbol</code> å±æ€§</li>
</ol>
<pre><code class="language-js">Function.prototype.myCall = function(context = window, ...args) {
    if (this === Function.prototype) {
        return undefined; // ç”¨äºé˜²æ­¢ Function.prototype.myCall() ç›´æ¥è°ƒç”¨
    }
    context = context || window;
    const fn = Symbol();
    context[fn] = this;
    const result = context[fn](...args);
    delete context[fn];
    return result;
};
</code></pre>
<h2 id="apply">apply</h2>
<p><code>apply</code> å®ç°ç±»ä¼¼ <code>call</code>ï¼Œå‚æ•°ä¸ºæ•°ç»„</p>
<pre><code class="language-js">Function.prototype.myApply = function(context = window, args) {
    if (this === Function.prototype) {
        return undefined; // ç”¨äºé˜²æ­¢ Function.prototype.myCall() ç›´æ¥è°ƒç”¨
    }
    const fn = Symbol();
    context[fn] = this;
    let result;
    if (Array.isArray(args)) {
        result = context[fn](...args);
    } else {
        result = context[fn]();
    }
    delete context[fn];
    return result;
};
</code></pre>
<h2 id="bind">bind</h2>
<p>å› ä¸º <code>bind()</code> è¿”å›ä¸€ä¸ªæ–¹æ³•éœ€æ‰‹åŠ¨æ‰§è¡Œï¼Œå› æ­¤åˆ©ç”¨é—­åŒ…å®ç°ã€‚</p>
<pre><code class="language-js">Function.prototype.myBind = function(context, ...args1) {
    if (this === Function.prototype) {
        throw new TypeError('Error');
    }
    const _this = this;
    return function F(...args2) {
        // åˆ¤æ–­æ˜¯å¦ç”¨äºæ„é€ å‡½æ•°
        if (this instanceof F) {
            return new _this(...args1, ...args2);
        }
        return _this.apply(context, args1.concat(args2));
    };
};
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å‡½æ•°çš„é˜²æŠ–ä¸èŠ‚æµ]]></title>
        <id>https://zxpsuper.github.io/post/han-shu-de-fang-dou-yu-jie-liu</id>
        <link href="https://zxpsuper.github.io/post/han-shu-de-fang-dou-yu-jie-liu">
        </link>
        <updated>2019-08-21T09:45:29.000Z</updated>
        <summary type="html"><![CDATA[<p><strong>æœ‰ä¸ªäººæ€»ç»“å‡ºï¼š</strong></p>
<ul>
<li>
<p>é˜²æŠ–å¦‚åŒä¸‹ç­ï¼Œåœ¨ä½ å‡†å¤‡æ”¶æ‹¾ä¸œè¥¿èµ°äººçš„è¿™æ®µæ—¶é—´é‡Œæœ‰æ–°å·¥ä½œå‡ºç°ä½ å°±ä¸‹ä¸äº†ç­ã€‚</p>
</li>
<li>
<p>èŠ‚æµå¦‚åŒæ€€å­•ï¼Œåœ¨åˆ†å¨©ä¹‹å‰æ¥çš„éƒ½æ€€ä¸ä¸Šã€‚</p>
</li>
</ul>
]]></summary>
        <content type="html"><![CDATA[<p><strong>æœ‰ä¸ªäººæ€»ç»“å‡ºï¼š</strong></p>
<ul>
<li>
<p>é˜²æŠ–å¦‚åŒä¸‹ç­ï¼Œåœ¨ä½ å‡†å¤‡æ”¶æ‹¾ä¸œè¥¿èµ°äººçš„è¿™æ®µæ—¶é—´é‡Œæœ‰æ–°å·¥ä½œå‡ºç°ä½ å°±ä¸‹ä¸äº†ç­ã€‚</p>
</li>
<li>
<p>èŠ‚æµå¦‚åŒæ€€å­•ï¼Œåœ¨åˆ†å¨©ä¹‹å‰æ¥çš„éƒ½æ€€ä¸ä¸Šã€‚</p>
</li>
</ul>
<!-- more -->
<h2 id="é˜²æŠ–">é˜²æŠ–</h2>
<p>æ‰€è°“é˜²æŠ–ï¼Œå°±æ˜¯æŒ‡è§¦å‘äº‹ä»¶ååœ¨ <code>n</code> ç§’å†…å‡½æ•°åªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœåœ¨ <code>n</code> ç§’å†…åˆè§¦å‘äº†äº‹ä»¶ï¼Œåˆ™ä¼šé‡æ–°è®¡ç®—å‡½æ•°æ‰§è¡Œæ—¶é—´ã€‚ï¼ˆé˜²è¯¯è§¦ï¼‰</p>
<pre><code class="language-js">// å»¶ç¼“æ‰§è¡Œ
function debounce(func, wait) {
    var timeout;

    return function() {
        var context = this;
        var args = arguments;
        console.log(args);
        console.log(func);
        if (timeout) clearTimeout(timeout);

        timeout = setTimeout(function() {
            func.apply(context, args);
        }, wait);
    };
}
// ç«‹å³æ‰§è¡Œ
function debounce(func, wait) {
    var timeout;

    return function() {
        var context = this;
        var args = arguments;

        if (timeout) clearTimeout(timeout);

        var callNow = !timeout;
        timeout = setTimeout(function() {
            timeout = null;
        }, wait);

        if (callNow) func.apply(context, args);
    };
}
</code></pre>
<h2 id="èŠ‚æµ">èŠ‚æµ</h2>
<p>æ‰€è°“èŠ‚æµï¼Œå°±æ˜¯æŒ‡è¿ç»­è§¦å‘äº‹ä»¶ä½†æ˜¯åœ¨ <code>n</code> ç§’ä¸­åªæ‰§è¡Œä¸€æ¬¡å‡½æ•°ã€‚ï¼ˆé™åˆ¶æµé‡ï¼‰</p>
<pre><code class="language-js">// æ—¶é—´æˆ³
function throttle(func, wait) {
    var previous = 0;

    return function() {
        var now = Date.now();
        var context = this;
        var args = arguments;
        if (now - previous &gt; wait) {
            func.apply(context, args);
            previous = now;
        }
    };
}
// å®šæ—¶å™¨
function throttle(func, wait) {
    var timeout;

    return function() {
        var context = this;
        var args = arguments;
        if (!timeout) {
            timeout = setTimeout(function() {
                timeout = null;
                func.apply(context, args);
            }, wait);
        }
    };
}
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æµè§ˆå™¨ Event Loop æœºåˆ¶]]></title>
        <id>https://zxpsuper.github.io/post/event-loop</id>
        <link href="https://zxpsuper.github.io/post/event-loop">
        </link>
        <updated>2019-08-09T03:44:21.000Z</updated>
        <summary type="html"><![CDATA[<p>Event Loopæ˜¯ä»€ä¹ˆ?</p>
<p>event loopæ˜¯ä¸€ä¸ªæ‰§è¡Œæ¨¡å‹ï¼Œåœ¨ä¸åŒçš„åœ°æ–¹æœ‰ä¸åŒçš„å®ç°ã€‚æµè§ˆå™¨å’ŒNodeJSåŸºäºä¸åŒçš„æŠ€æœ¯å®ç°äº†å„è‡ªçš„Event Loopã€‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>Event Loopæ˜¯ä»€ä¹ˆ?</p>
<p>event loopæ˜¯ä¸€ä¸ªæ‰§è¡Œæ¨¡å‹ï¼Œåœ¨ä¸åŒçš„åœ°æ–¹æœ‰ä¸åŒçš„å®ç°ã€‚æµè§ˆå™¨å’ŒNodeJSåŸºäºä¸åŒçš„æŠ€æœ¯å®ç°äº†å„è‡ªçš„Event Loopã€‚</p>
<!-- more -->
<h2 id="1-å®é˜Ÿåˆ—å’Œå¾®é˜Ÿåˆ—">1. å®é˜Ÿåˆ—å’Œå¾®é˜Ÿåˆ—</h2>
<p><strong>å®é˜Ÿåˆ—ï¼Œmacrotaskï¼Œä¹Ÿå«tasksã€‚</strong> ä¸€äº›å¼‚æ­¥ä»»åŠ¡çš„å›è°ƒä¼šä¾æ¬¡è¿›å…¥macro task queueï¼Œç­‰å¾…åç»­è¢«è°ƒç”¨ï¼Œè¿™äº›å¼‚æ­¥ä»»åŠ¡åŒ…æ‹¬ï¼š</p>
<ul>
<li>setTimeout</li>
<li>setInterval</li>
<li>setImmediate (Nodeç‹¬æœ‰)</li>
<li>requestAnimationFrame (æµè§ˆå™¨ç‹¬æœ‰)</li>
<li>I/O</li>
<li>UI rendering (æµè§ˆå™¨ç‹¬æœ‰)</li>
</ul>
<p><strong>å¾®é˜Ÿåˆ—ï¼Œmicrotaskï¼Œä¹Ÿå«jobsã€‚</strong> å¦ä¸€äº›å¼‚æ­¥ä»»åŠ¡çš„å›è°ƒä¼šä¾æ¬¡è¿›å…¥micro task queueï¼Œç­‰å¾…åç»­è¢«è°ƒç”¨ï¼Œè¿™äº›å¼‚æ­¥ä»»åŠ¡åŒ…æ‹¬ï¼š</p>
<ul>
<li>process.nextTick (Nodeç‹¬æœ‰)</li>
<li>Promise</li>
<li>Object.observe</li>
<li>MutationObserver</li>
</ul>
<h2 id="2-å®ä¾‹ä»‹ç»">2. å®ä¾‹ä»‹ç»</h2>
<p>æ‰§è¡Œé¡ºåºï¼Œå…ˆå¾®é˜Ÿåˆ—ï¼Œåå®é˜Ÿåˆ—ã€‚</p>
<p>çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code class="language-js">console.log(1);
setTimeout(() =&gt; {
  console.log(2);
  setTimeout(() =&gt; {
    console.log(8);
  })
  Promise.resolve().then(() =&gt; {
    console.log(3)
  });
});
new Promise((resolve, reject) =&gt; {
  console.log(4)
  setTimeout(() =&gt; {
    console.log(10);
  })
  resolve()
}).then(() =&gt; {
  console.log(5);
  Promise.resolve().then(() =&gt; {
    console.log(11)
  });
  setTimeout(() =&gt; {
    console.log(13);
  })
})
setTimeout(() =&gt; {
  Promise.resolve().then(() =&gt; {
    console.log(9)
  });
  console.log(6);
  setTimeout(() =&gt; {
    console.log(12);
  })
})
console.log(7);
</code></pre>
<p>ä»å¤´è‡³å°¾æ‰§è¡Œä¸€æ¬¡ä»£ç ,æ ¹æ®ä¸Šé¢åˆ†ç±»è§„åˆ™åˆ†è‡³ä¸åŒé˜Ÿåˆ—, new promise( function )ä¹Ÿæ˜¯ç«‹å³æ‰§è¡Œã€‚setTimeout çš„å›è°ƒå‡½æ•°å±äºå®é˜Ÿåˆ—ï¼ˆmacrotaskï¼‰ï¼Œresolve çš„å›è°ƒå‡½æ•°å±äºå¾®é˜Ÿåˆ—</p>
<pre><code class="language-js">// æ ˆåŒºï¼ˆstackï¼‰
console.log(1);
console.log(4);
console.log(7);
</code></pre>
<pre><code class="language-js">// å®é˜Ÿåˆ—
() =&gt; {
  console.log(2);
  setTimeout(() =&gt; {
    console.log(8);
  })
  Promise.resolve().then(() =&gt; {
    console.log(3)
  });
}
() =&gt; {
  console.log(10);
}
() =&gt; {
  Promise.resolve().then(() =&gt; {
    console.log(9)
  });
  console.log(6);
  setTimeout(() =&gt; {
    console.log(12);
  })
}
</code></pre>
<pre><code class="language-js">// å¾®é˜Ÿåˆ—
() =&gt; {
  console.log(5);
  Promise.resolve().then(() =&gt; {
    console.log(11)
  });
  setTimeout(() =&gt; {
    console.log(13);
  })
}
</code></pre>
<p>ä¼˜å…ˆæ‰§è¡Œå¾®é˜Ÿåˆ—ï¼Œå¾®é˜Ÿåˆ—æ‰§è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„å¾®é˜Ÿåˆ—å’Œå®é˜Ÿåˆ—ç½®äºé˜Ÿåˆ—æœ«å°¾æ’åºæ‰§è¡Œï¼Œè€Œå®é˜Ÿåˆ—äº§ç”Ÿçš„å¾®é˜Ÿåˆ—å’Œå®é˜Ÿåˆ—äºæ–°çš„é˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚ã€‚</p>
<p>æ‰§è¡Œå¾®é˜Ÿåˆ—ï¼šï¼ˆåˆ†ç±»ï¼‰</p>
<pre><code class="language-js">// æ ˆåŒºï¼ˆstackï¼‰
console.log(1);
console.log(4);
console.log(7);
//////////
console.log(5);
</code></pre>
<pre><code class="language-js">// å¾®é˜Ÿåˆ—
() =&gt; {
  console.log(11)
});
</code></pre>
<pre><code class="language-js">// å®é˜Ÿåˆ—
() =&gt; {
  console.log(2);
  setTimeout(() =&gt; {
    console.log(8);
  })
  Promise.resolve().then(() =&gt; {
    console.log(3)
  });
}
() =&gt; {
  console.log(10);
}
() =&gt; {
  Promise.resolve().then(() =&gt; {
    console.log(9)
  });
  console.log(6);
  setTimeout(() =&gt; {
    console.log(12);
  })
}
() =&gt; {
    console.log(13);
}
</code></pre>
<p>æ­¤æ—¶æ–°å¢äº†ä¸€ä¸ªå¾®é˜Ÿåˆ—<code>console.log(11)</code>,å› ä¸ºæ˜¯å¾®é˜Ÿåˆ—äº§ç”Ÿçš„ï¼Œç»§ç»­æ‰§è¡Œï¼š</p>
<pre><code class="language-js">// æ ˆåŒºï¼ˆstackï¼‰
console.log(1);
console.log(4);
console.log(7);
//////////
console.log(5);
/////////
console.log(11)
</code></pre>
<pre><code class="language-js">// å¾®é˜Ÿåˆ—-ç©º
</code></pre>
<pre><code class="language-js">// å®é˜Ÿåˆ—
() =&gt; {
  console.log(2);
  setTimeout(() =&gt; {
    console.log(8);
  })
  Promise.resolve().then(() =&gt; {
    console.log(3)
  });
}
() =&gt; {
  console.log(10);
}
() =&gt; {
  Promise.resolve().then(() =&gt; {
    console.log(9)
  });
  console.log(6);
  setTimeout(() =&gt; {
    console.log(12);
  })
}
() =&gt; {
    console.log(13);
}
</code></pre>
<p>æ‰§è¡Œå®Œå¾®é˜Ÿåˆ—åæ‰§è¡Œå®é˜Ÿåˆ—ï¼š</p>
<pre><code class="language-js">// æ ˆåŒºï¼ˆstackï¼‰
console.log(1);
console.log(4);
console.log(7);
//////////
console.log(5);
/////////
console.log(11);
/////////
console.log(2);
console.log(10);
console.log(6);
console.log(13);
</code></pre>
<pre><code class="language-js">// å¾®é˜Ÿåˆ—
() =&gt; {
  console.log(3)
}
() =&gt; {
  console.log(9)
}
</code></pre>
<pre><code class="language-js">// å®é˜Ÿåˆ—
() =&gt; {
  console.log(8);
}
() =&gt; {
  console.log(12);
}
</code></pre>
<p>æ¥ä¸‹æ¥æ‰§è¡Œå¾®é˜Ÿåˆ—åå®é˜Ÿåˆ—ï¼Œå³ï¼š</p>
<pre><code class="language-js">// æ ˆåŒºï¼ˆstackï¼‰
console.log(1);
console.log(4);
console.log(7);
//////////
console.log(5);
/////////
console.log(11);
/////////
console.log(2);
console.log(10);
console.log(6);
console.log(13);
////////
console.log(3)
console.log(9)
////////
console.log(8);
console.log(12);
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://zxpsuper.github.io/post/hello-gridea</id>
        <link href="https://zxpsuper.github.io/post/hello-gridea">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="http://hvenotes.fehey.com/">Gridea ä¸»é¡µ</a><br>
<a href="http://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>ğ–¶ğ—‚ğ—‡ğ–½ğ—ˆğ—ğ—Œ</strong> æˆ– <strong>ğ–¬ğ–ºğ–¼ğ–®ğ–²</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>