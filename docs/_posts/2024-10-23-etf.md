---
title: ETF拯救世界
date: 2024-10-23
tags:
  - 杂文
  - 投资
author: 小皮咖
location: 广州
---

投资，每个人都应该有一套完整的观察和投资体系。

不是说这个时刻我觉得可以买，这个时刻我觉得可以卖。

如果是这样随意买卖，那么胜率会很低，短线频繁操作盈亏更加的影响心情。

今天看了 E 大的几篇文章，深有体会，这里分享给大家。

- [波段策略.网格之一：写在前面、体系以及策略](https://mp.weixin.qq.com/s/uxktt5ZpNo03FpQQX-aG7g)
- [波段策略.网格之二：网格策略基础/1.0 版](https://mp.weixin.qq.com/s/-czfqGvxkDcay_tSI1jv5g)
- [波段策略.网格之三：网格策略进阶/2.0 版](https://mp.weixin.qq.com/s/8pRKsjiQSZzrmH-uWCkRLQ)

<!-- more -->

## 网格策略

这几篇文章着重讲述「网格策略」，它是一个中短期波段策略。

网格策略主要适用于稳定震荡的金融品种，比如上证指数十年 3000 点等。

这种品种来回波动，特别适合中短期波段策略！

金融投资最重要的是什么？**是低买高卖**。

网格操作就是如此，逢低按照预定的计划（预定的价格和数量）加仓，在预定的计划建仓，锁住固定的收益，其他的交给时间。

### 开始网格，你需要做的事情非常简单：

- 第一步：确定交易品种（来回震荡，不会退市的，推荐指数 etf）。

- 第二步：列出网格表格。表格中包括交易价格、交易金额、交易日期。

- 第三步：做压力测试（确定你的最大亏损比例和金额）。

- 第四步：设置交易提醒（可以用闹钟或者交易软件）。

- 第五步：按照交易提醒进行交易。

在这里，我来实现一个计划表格：

<el-form ref="form" :model="form" label-width="80px" :inline="true">
<el-form-item label="基金">
<el-input v-model="form.inputName" class="width200"></el-input>
</el-form-item>
<el-form-item label="价格">
<el-input v-model="form.price" type="number" class="width200"></el-input>
</el-form-item>
<el-form-item label="每份金额">
<el-input v-model="form.amount" type="number" class="width200"></el-input>
</el-form-item>
<el-form-item label="网格宽度">
<el-input v-model="form.gridWidth" type="number" class="width200">
<template slot="append">%</template>
</el-input>
</el-form-item>
<el-form-item label="最大跌幅">
<el-input v-model="form.maxPercentOfDecline" type="number" class="width200">
<template slot="append">%</template>
</el-input>
</el-form-item>
<el-form-item label="加码幅度">
<el-input v-model="form.increasePercentPerGrid" type="number" class="width200">
<template slot="append">%</template>
</el-input>
</el-form-item>
<el-form-item label="其他设置">
    <el-checkbox v-model="form.retain">留存利润</el-checkbox>
    <el-checkbox v-model="form.middleGrid">启用中网</el-checkbox>
    <el-checkbox v-model="form.bigGrid">启用大网</el-checkbox>
</el-form-item>
</el-form>

<el-table :data="grids" stripe style="width: 100%">
<el-table-column type="index" width="50" label="序号"></el-table-column>
<el-table-column prop="type" label="种类"></el-table-column>
<el-table-column prop="gear" label="档位"></el-table-column>
<el-table-column prop="buyPrice" label="买入价"></el-table-column>
<el-table-column prop="buyCount" label="买入数量"></el-table-column>
<el-table-column prop="buyAmount" label="买入金额"></el-table-column>
<el-table-column prop="sellPrice" label="卖出价"></el-table-column>
<el-table-column prop="sellCount" label="卖出数量"></el-table-column>
<el-table-column prop="sellAmount" label="卖出金额"></el-table-column>
</el-table>

<tongji/>

<comment/>

<script>

    const GearType = {
        small: '小网',
        middle: '中网',
        big: '大网'
    }
    const toFixedString = (value, digits = 3) => {
        return value.toFixed(digits);
    };
    const toFixedNumber = (value, digits = 3) => {
        return parseFloat(toFixedString(value, digits));
    };

    const createGrid = (options) => {
        const {
            numberOfRetainedProfits,
            type,
            gear,
            price,
            percent,
            buyAmount: __buyAmount
        } = options;
        const buyPrice = gear * price;
        // 买入必须按照100份整数
        const buyCount = Math.floor(__buyAmount / buyPrice / 100) * 100;
        const buyAmount = +(buyCount * buyPrice).toFixed(2);
        const sellPrice = +((gear + percent) * price).toFixed(2);
        const currentAmount = buyCount * sellPrice;
        const profits = currentAmount - buyAmount;
        const returnRate = toFixedString((profits / buyAmount) * 100, 2) + '%';
        let retainedProfits = profits * numberOfRetainedProfits;
        // 卖出必须按照100份整数
        const sellCount =
            Math.floor((currentAmount - retainedProfits) / sellPrice / 100) * 100;
        const sellAmount = sellCount * sellPrice;
        retainedProfits = currentAmount - sellAmount;
        const retainedCount = retainedProfits / sellPrice;

        return {
            type,
            gear,
            buyAmount: buyAmount,
            buyCount,
            buyPrice,
            sellPrice,
            sellAmount,
            sellCount,
            profits,
            returnRate,
            retainedProfits,
            retainedCount
        };
    };


    export default {
        data() {
            return {
                form: {
                    inputName: '',
                    name: '',
                    price: 1,
                    amount: 1000,
                    gridWidth: 5,
                    maxPercentOfDecline: 60,
                    increasePercentPerGrid: 0,
                    retain: false,
                    middleGrid: false,
                    bigGrid: false
                },
                grids: []
            }
        },
        mounted() {
            this.createGrid()
        },
        methods: {
            createGrid() {
                
                const  {price, amount, gridWidth, maxPercentOfDecline, increasePercentPerGrid, retain, middleGrid: hasMiddleGrid, bigGrid: hasBigGrid } = this.form
                const grids = []
                const maxGear = 1
                const minGear = (100 - maxPercentOfDecline) / 100
                const gridWidthRate = gridWidth / 100 
                const numberOfRetainedProfits = retain ? 1 : 0
                let gear = maxGear;
                let i = 0;
                let j = 0;
                let k = 0;

                while (gear >= minGear) {
                    const buyAmount = toFixedNumber(
                    (increasePercentPerGrid * i + 1) * amount,
                    0
                    );

                    grids.push(
                    createGrid({
                        type: GearType.small,
                        buyAmount,
                        gear,
                        percent: gridWidthRate,
                        numberOfRetainedProfits,
                        price
                    })
                    );

                    // 中网幅度15%
                    if (hasMiddleGrid && i && i % T_MIDDLE === 0) {
                    j++;
                    grids.push(
                        createGrid({
                        type: GearType.middle,
                        buyAmount,
                        gear: toFixedNumber(1 - j * gridWidthRate * 2),
                        percent: gridWidthRate * 2,
                        numberOfRetainedProfits,
                        price
                        })
                    );
                    }

                    // 大网幅度30%
                    if (hasBigGrid && i && i % T_BIG === 0) {
                    k++;
                    grids.push(
                        createGrid({
                        type: GearType.big,
                        buyAmount,
                        gear: toFixedNumber(1 - k * gridWidthRate * 3),
                        percent: gridWidthRate * 3,
                        numberOfRetainedProfits,
                        price
                        })
                    );
                    }

                    i++;
                    gear = toFixedNumber(1 - i * gridWidthRate);
                }

                this.grids = grids
                console.log(grids)
            }
        }
    }
</script>
<style>
    .width200 {
        width: 200px
    }
    .el-table table {
        margin: 0
    }
</style>
