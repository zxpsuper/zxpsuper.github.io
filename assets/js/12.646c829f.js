(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{270:function(e,t,a){"use strict";var n=a(111),i=a(20);e.exports=function(e,t,a){return a.get&&n(a.get,t,{getter:!0}),a.set&&n(a.set,t,{setter:!0}),i.f(e,t,a)}},278:function(e,t,a){"use strict";var n=TypeError;e.exports=function(e,t){if(e<t)throw new n("Not enough arguments");return e}},297:function(e,t,a){"use strict";var n=a(109),i=a(8),s=a(110),o=a(278),l=URLSearchParams,r=l.prototype,c=i(r.append),u=i(r.delete),h=i(r.forEach),d=i([].push),v=new l("a=1&a=2&b=3");v.delete("a",1),v.delete("b",void 0),v+""!="a=2"&&n(r,"delete",(function(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return u(this,e);var n=[];h(this,(function(e,t){d(n,{key:t,value:e})})),o(t,1);for(var i,l=s(e),r=s(a),v=0,p=0,f=!1,g=n.length;v<g;)i=n[v++],f||i.key===l?(f=!0,u(this,i.key)):p++;for(;p<g;)(i=n[p++]).key===l&&i.value===r||c(this,i.key,i.value)}),{enumerable:!0,unsafe:!0})},298:function(e,t,a){"use strict";var n=a(109),i=a(8),s=a(110),o=a(278),l=URLSearchParams,r=l.prototype,c=i(r.getAll),u=i(r.has),h=new l("a=1");!h.has("a",2)&&h.has("a",void 0)||n(r,"has",(function(e){var t=arguments.length,a=t<2?void 0:arguments[1];if(t&&void 0===a)return u(this,e);var n=c(this,e);o(t,1);for(var i=s(a),l=0;l<n.length;)if(n[l++]===i)return!0;return!1}),{enumerable:!0,unsafe:!0})},299:function(e,t,a){"use strict";var n=a(10),i=a(8),s=a(270),o=URLSearchParams.prototype,l=i(o.forEach);n&&!("size"in o)&&s(o,"size",{get:function(){var e=0;return l(this,(function(){e++})),e},configurable:!0,enumerable:!0})},309:function(e,t,a){},332:function(e,t,a){"use strict";a(309)},373:function(e,t,a){"use strict";a.r(t);a(297),a(298),a(299);var n={data:()=>({placeholder:"巷子里的猫很自由\n却没有归宿\n围墙里的狗有归宿\n却终身都得低头\n人生这道选择题怎么选都会有遗憾\n人总以为自己没走过的路上开满了鲜花",fontSize:40,lineHeight:80,textarea:"",options:[{value:"https://zxpsuper.github.io/qrcode-with-logos/assets/avatar.C4sG52Um.jpg",label:"小皮咖"},{value:"/images/郭德纲.jpg",label:"郭德纲"},{value:"/images/罗永浩.jpg",label:"罗永浩"},{value:"/images/罗翔.webp",label:"罗翔"},{value:"/images/马斯克.webp",label:"马斯克"}],people:"/images/罗翔.webp"}),mounted(){this.createImage()},methods:{downloadFile(){const e=document.getElementById("canvas").toDataURL();var t,a;t=e,a="小皮咖.png",new Promise((e,n)=>{const i=new Image;i.setAttribute("crossOrigin","anonymous"),i.onload=function(){const t=document.createElement("canvas");t.width=i.width,t.height=i.height;const n=t.getContext("2d");n&&n.drawImage(i,0,0,i.width,i.height);const s=t.toDataURL("image/png"),o=document.createElement("a"),l=new MouseEvent("click");o.download=a,o.href=s,o.dispatchEvent(l),o.remove(),e(null)},i.onerror=function(e){n(e)},i.src=t})},async uploadFile(){const e=await(t=".png,.jpg,.webp,.jpeg",new Promise((e,a)=>{const n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("accept",t),n.click(),n.addEventListener("change",(function(t){var a;const i=null==t||null===(a=t.target)||void 0===a?void 0:a.files[0];e(i||null),n.remove()}))}));var t;this.people=function(e){if(!e)return"";var t=null;return"createObjectURL"in window&&isFunction(window.createObjectURL)?t=window.createObjectURL(e):null!=window.URL?t=window.URL.createObjectURL(e):null!=window.webkitURL&&(t=window.webkitURL.createObjectURL(e)),t}(e),this.createImage()},createImage(){const e=document.getElementById("canvas"),t=e.getContext("2d");e.width=840;let a=new Image;a.onload=()=>{const n=840/a.width,i=a.height*n,s=this.lineHeight,o=this.fontSize,l=s/n,r=(this.textarea||this.placeholder).split("\n");e.width=840,e.height=i,r.length>1&&(e.height+=(r.length-1)*s),t.drawImage(a,0,0,e.width,i),t.font=o+"px Arial",t.fillStyle="white",t.textAlign="center",t.shadowColor="black",t.shadowBlur=5,t.shadowOffsetX=2,t.shadowOffsetY=2;for(let n=0;n<r.length;n++){if(n>0){const o=0,r=a.height-l,c=a.width,u=l,h=0,d=i+(n-1)*s,v=e.width,p=s;t.drawImage(a,o,r,c,u,h,d,v,p)}const c=i+n*s-(s-o)/2;t.fillText(r[n],e.width/2,c)}t.font="24px Arial",t.fillStyle="#cccccc",t.textAlign="right",t.shadowColor="black",t.shadowBlur=2,t.shadowOffsetX=1,t.shadowOffsetY=1,t.fillText("@小皮咖",e.width-20,40)},a.src=this.people}}},i=(a(332),a(5)),s=Object(i.a)(n,(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("昨天刷知乎的时候看到一个问题"),t("a",{attrs:{href:"https://www.zhihu.com/question/660952558/answer/3565035895",target:"_blank",rel:"noopener noreferrer"}},[e._v("「假如一辈子不结婚会怎样？」"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("其中有个回答使用罗翔老师的视频采访字幕拼接截图的形式获得了高赞，看完之后还感觉挺有道理，结果翻开评论一堆人在说图是制作的，罗翔没有说过这些话。")]),e._v(" "),t("p",[e._v("感觉蛮有意思的，今天就来试试实现一个"),t("strong",[e._v("字幕截图生成器")]),e._v("😄！")]),e._v(" "),t("tongji"),e._v(" "),t("h2",{attrs:{id:"demo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#demo"}},[e._v("#")]),e._v(" Demo")]),e._v(" "),t("el-row",{staticStyle:{"margin-top":"16px"},attrs:{gutter:20}},[t("el-col",{attrs:{span:8}},[t("div",{staticClass:"flex y-center"},[e._v("\n字号：\n"),t("el-slider",{staticClass:"flex1",attrs:{min:12,max:60,size:"mini"},on:{change:e.createImage},model:{value:e.fontSize,callback:function(t){e.fontSize=t},expression:"fontSize"}})],1),e._v(" "),t("div",{staticClass:"flex y-center"},[e._v("\n行高：\n"),t("el-slider",{staticClass:"flex1",attrs:{min:24,max:120,size:"mini"},on:{change:e.createImage},model:{value:e.lineHeight,callback:function(t){e.lineHeight=t},expression:"lineHeight"}})],1),e._v(" "),t("div",{staticClass:"flex y-center mb-16"},[e._v("\n名人：\n"),t("el-select",{staticClass:"flex1",attrs:{placeholder:"请选择名人",size:"mini"},on:{change:e.createImage},model:{value:e.people,callback:function(t){e.people=t},expression:"people"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),t("el-input",{staticClass:"mb-16",attrs:{type:"textarea",rows:8,placeholder:e.placeholder},on:{change:e.createImage},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}}),e._v(" "),t("button",{staticClass:"button",on:{click:e.downloadFile}},[t("span",{staticClass:"button-content"},[e._v("下载图片")])]),e._v(" "),t("button",{staticClass:"upload",attrs:{size:"mini"},on:{click:e.uploadFile}},[e._v("\n上传图片\n")])],1),e._v(" "),t("el-col",{attrs:{span:16}},[t("canvas",{staticStyle:{width:"420px"},attrs:{id:"canvas"}})])],1),e._v(" "),t("h2",{attrs:{id:"实现原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实现原理"}},[e._v("#")]),e._v(" 实现原理")]),e._v(" "),t("p",[e._v("原理也很简单，画布根据图片宽高和文案行数计算出总画布总高度，然后便是一行一行画背景和文字。")]),e._v(" "),t("p",[e._v("首行背景图全高，后续行数只需要画那一行的背景图片即可！")]),e._v(" "),t("p",[e._v("实现比较简单，主要是好玩哈哈哈 😄！！好玩点个赞呗！👍")]),e._v(" "),t("comment")],1)}),[],!1,null,"50f5cec6",null);t.default=s.exports}}]);